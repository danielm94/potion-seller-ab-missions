ab_wal_boier_compromise_missions = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
		has_wallachia_purged_the_estates = no
	}
	wal_placate_the_boiers = {
		icon = gfx_wal_placate_the_boiers
		position = 1
		trigger = {
			if = {
				limit = {
					has_country_flag = debug
				}
				always = yes
			}
			else = {
				num_of_estate_agendas_completed = {
					estate = estate_nobles
					value = 2
				}
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 60
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = wallachia_placating_the_boiers
				duration = 10950
			}
			custom_tooltip = wal_placate_the_boiers_effect_tooltip
		}
	}
	wal_compromise_with_the_boiers = {
		icon = gfx_wal_compromise_with_the_boiers
		position = 2
		required_missions = {
			wal_placate_the_boiers
		}
		trigger = {
			if = {
				limit = {
					has_country_flag = debug
				}
				always = yes
			}
			else = {
				num_of_estate_agendas_completed = {
					estate = estate_nobles
					value = 3
				}
				has_reform = maintain_nobles_status_quo_reform
				num_of_estate_privileges = {
					estate = estate_nobles
					value = 5
				}
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 70
				}
			}
		}
		effect = {
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = 10
			}
			custom_tooltip = wal_compromise_with_the_boiers_increased_levies_bonus_tooltip
			custom_tooltip = wal_compromise_with_the_boiers_advisor_privilege_bonus_tooltip
			hidden_effect = {
				set_country_flag = wal_compromised_with_the_boiers
			}
			add_prestige = -10
			change_estate_land_share = {
				estate = estate_nobles
				share = 5
			}
			custom_tooltip = wal_compromise_with_the_boiers_can_no_longer_seize_from_boiers_tooltip
			custom_tooltip = wal_compromise_with_the_boiers_dont_panic_tooltip
		}
	}
	wal_the_great_feast = {
		icon = gfx_wal_the_great_feast
		position = 3
		required_missions = {
			wal_compromise_with_the_boiers
		}
		trigger = {
			if = {
				limit = {
					has_country_flag = debug
				}
				always = yes
			}
			else = {
				num_of_estate_agendas_completed = {
					estate = estate_nobles
					value = 5
				}
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 90
				}
				crown_land_share = 30
			}
		}
		effect = {
			set_country_flag = wal_elective_monarchy
			add_government_reform = wallachian_elective_monarchy
			change_estate_land_share = {
				estate = estate_nobles
				share = -20
			}
			hidden_effect = {
				tuh_faction_initialization_effect = yes
			}
		}
	}
}

ab_wal_slayed_the_boiers_missions = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
		has_wallachia_purged_the_estates = yes
	}
}

ab_wal_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
	}
	wal_unite_the_principalities = {
		icon = gfx_wal_unite_the_principalities
		position = 2
		required_missions = {
			wal_call_to_arms
		}
		provinces_to_highlight = {
			OR = {
				area = moldavia_area
				area = bessarabia_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			moldavia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			bessarabia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_permanent_claim_multi_provinces = {
				target = yedisan_area
			}
			add_permanent_claim_multi_provinces = {
				target = zaporizhia_area
			}
			add_permanent_claim_multi_provinces = {
				target = crimea_area
			}
			add_permanent_claim_multi_provinces = {
				target = azov_area
			}
			custom_tooltip = tooltip_line_divider
			if = {
				limit = {
					has_vlad_2nd_or_3rd_ruling = yes
				}
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_yes
				change_ruler_stat = {
					type = mil
					amount = 1
				}
			}
			else = {
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_no
				tooltip = {
					change_ruler_stat = {
						type = mil
						amount = 1
					}
				}
			}
			add_prestige_or_monarch_power = {
				amount = 5
			}
			country_event = {
				id = AB_wallachia_events.9
			}
		}
	}
}

ab_wal_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
	}
	wal_call_to_arms = {
		icon = GFX_wal_call_to_arms
		position = 1
		trigger = {
			OR = {
				army_size_percentage = 0.8
				manpower_percentage = 1
			}
		}
		effect = {
			add_permanent_claim_on_all_neighboring_provinces = yes
			add_permanent_claim_multi_provinces = {
				target = moldavia_area
			}
			add_permanent_claim_multi_provinces = {
				target = bessarabia_area
			}
			add_permanent_claim_multi_provinces = {
				target = southern_transylvania_area
			}
			add_permanent_claim_multi_provinces = {
				target = transylvania_area
			}
			custom_tooltip = tooltip_line_divider
			if = {
				limit = {
					has_vlad_2nd_or_3rd_ruling = yes
				}
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_yes
				define_ruler_to_general = {
					fire = 3
					shock = 4
					manuever = 3
					siege = 1
				}
			}
			else = {
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_no
				create_general = {
					tradition = 40
				}
			}
			add_country_modifier = {
				name = wallachia_securing_the_homeland
				duration = 5475
			}
		}
	}
	wal_strike_the_bulgars = {
		icon = gfx_wal_strike_the_bulgars
		position = 2
		required_missions = {
			wal_call_to_arms
		}
		provinces_to_highlight = {
			OR = {
				province_id = 4706
				province_id = 159
				province_id = 4704
				province_id = 150
				province_id = 2746
				province_id = 4957
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			4706 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				OR = {
					province_id = 159
					province_id = 4704
					province_id = 150
					province_id = 2746
					province_id = 4957
				}
			}
		}
		effect = {
			add_permanent_claim_multi_provinces = {
				target = thrace_area
			}
			add_permanent_claim_multi_provinces = {
				target = bulgaria_area
			}
			add_core = 4706
			custom_tooltip = tooltip_line_divider
			if = {
				limit = {
					has_vlad_2nd_or_3rd_ruling = yes
				}
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_yes
				change_ruler_stat = {
					type = dip
					amount = 1
				}
			}
			else = {
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_no
				tooltip = {
					change_ruler_stat = {
						type = dip
						amount = 1
					}
				}
			}
			if = {
				limit = {
					is_rival = BUL
				}
				custom_tooltip = wal_strike_the_bulgars_bul_rival_tooltip_yes
				add_splendor = 100
			}
			else = {
				custom_tooltip = wal_strike_the_bulgars_bul_rival_tooltip_no
				tooltip = {
					add_splendor = 100
				}
			}
			if = {
				limit = {
					has_country_flag = wallachia_impaled_bulgaria
				}
				custom_tooltip = wal_strike_the_bulgars_impale_tooltip_yes
				change_terror = {
					value = 5
					scaled_with_gain_modifier = yes
				}
			}
			else = {
				custom_tooltip = wal_strike_the_bulgars_impale_tooltip_no
				tooltip = {
					change_terror = {
						value = 5
						scaled_with_gain_modifier = yes
					}
				}
			}
			add_army_tradition_or_mil_power = {
				amount = 10
			}
			add_adm_power = 50
		}
	}
	wal_unite_the_vlachs = {
		icon = gfx_wal_unify_the_vlachs
		position = 3
		required_missions = {
			wal_liberate_transylvania
			wal_strike_the_bulgars
			wal_unite_the_principalities
		}
		provinces_to_highlight = {
			OR = {
				area = transylvania_area
				area = southern_transylvania_area
				area = moldavia_area
				area = bessarabia_area
				province_id = 4706
			}
			NOT = {
				AND = {
					is_core = ROOT
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		trigger = {
			transylvania_area = {
				type = all
				is_core = ROOT
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_transylvania_area = {
				type = all
				is_core = ROOT
				country_or_non_sovereign_subject_holds = ROOT
			}
			moldavia_area = {
				type = all
				is_core = ROOT
				country_or_non_sovereign_subject_holds = ROOT
			}
			bessarabia_area = {
				type = all
				is_core = ROOT
				country_or_non_sovereign_subject_holds = ROOT
			}
			4706 = {
				is_core = ROOT
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_permanent_claim_multi_provinces = {
				target = macedonia_area
			}
			add_permanent_claim_multi_provinces = {
				target = northern_greece_area
			}
			add_permanent_claim_multi_provinces = {
				target = morea_area
			}
			add_permanent_claim_multi_provinces = {
				target = albania_area
			}
			add_permanent_claim_multi_provinces = {
				target = rascia_area
			}
			add_permanent_claim_multi_provinces = {
				target = serbia_area
			}
			add_permanent_claim_multi_provinces = {
				target = bosnia_area
			}
			custom_tooltip = tooltip_line_divider
			if = {
				limit = {
					has_vlad_2nd_or_3rd_ruling = yes
				}
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_yes
				change_ruler_stat = {
					type = adm
					amount = 1
				}
			}
			else = {
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_no
				tooltip = {
					change_ruler_stat = {
						type = adm
						amount = 1
					}
				}
			}
			add_ruler_modifier = {
				name = wallachia_unifier_of_the_vlachs
				duration = -1
			}
			free_up_bad_ruler_personality_if_full = yes
			add_ruler_personality = conqueror_personality
			add_power_projection = {
				type = wallachia_unified_vlachs_pp
				amount = 15
			}
			add_prestige_or_monarch_power = {
				amount = 15
			}
			custom_tooltip = wal_unite_the_vlachs_autonomy_tooltip
			hidden_effect = {
				every_owned_province = {
					limit = {
						culture_group = romanian_culture_group
					}
					add_local_autonomy = -10
					add_nationalism = -5
				}
			}
			custom_tooltip = wal_unite_the_vlachs_dacia_tooltip
			hidden_effect = {
				set_country_flag = early_form_dacia
			}
		}
	}
}

ab_wal_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
	}
	wal_liberate_transylvania = {
		icon = GFX_wal_liberate_transylvania
		position = 2
		required_missions = {
			wal_call_to_arms
		}
		provinces_to_highlight = {
			OR = {
				area = transylvania_area
				area = southern_transylvania_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = transylvania_area
					area = southern_transylvania_area
				}
			}
		}
		effect = {
			add_permanent_claim_multi_provinces = {
				target = alfold_area
			}
			add_permanent_claim_multi_provinces = {
				target = centralhungary_area
			}
			add_permanent_claim_multi_provinces = {
				target = eastslovakia_area
			}
			custom_tooltip = tooltip_line_divider
			if = {
				limit = {
					has_vlad_2nd_or_3rd_ruling = yes
				}
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_yes
				change_ruler_stat = {
					type = adm
					amount = 1
				}
			}
			else = {
				custom_tooltip = has_vlad_2nd_or_3rd_ruling_tooltip_no
				tooltip = {
					change_ruler_stat = {
						type = adm
						amount = 1
					}
				}
			}
			if = {
				limit = {
					has_country_flag = wallachia_impaled_magyars
				}
				custom_tooltip = wal_liberate_transylvania_impale_tooltip_yes
				change_terror = {
					value = 5
					scaled_with_gain_modifier = yes
				}
			}
			else = {
				custom_tooltip = wal_liberate_transylvania_impale_tooltip_no
				tooltip = {
					change_terror = {
						value = 5
						scaled_with_gain_modifier = yes
					}
				}
			}
			add_army_tradition_or_mil_power = {
				amount = 15
			}
			add_accepted_culture_or_dip_power = {
				culture = transylvanian
			}
			custom_tooltip = wal_liberate_transylvania_heathen_tooltip
			tooltip = {
				add_province_modifier = {
					name = wallachia_establish_mountain_monasteries
					duration = 7300
				}
			}
			hidden_effect = {
				transylvania_area = {
					limit = {
						religion = tengri_pagan_reformed
					}
					add_province_modifier = {
						name = wallachia_establish_mountain_monasteries
						duration = 7300
					}
				}
				southern_transylvania_area = {
					limit = {
						religion = tengri_pagan_reformed
					}
					add_province_modifier = {
						name = wallachia_establish_mountain_monasteries
						duration = 7300
					}
				}
			}
			custom_tooltip = wal_liberate_transylvania_bretheren_tooltip
			tooltip = {
				add_province_modifier = {
					name = wallachia_liberated_bretheren
					duration = 7300
				}
			}
			hidden_effect = {
				transylvania_area = {
					limit = {
						culture = transylvanian
					}
					add_province_modifier = {
						name = wallachia_liberated_bretheren
						duration = 7300
					}
				}
				southern_transylvania_area = {
					limit = {
						culture = transylvanian
					}
					add_province_modifier = {
						name = wallachia_liberated_bretheren
						duration = 7300
					}
				}
			}
		}
	}
}

ab_wal_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		is_or_was_wallachia = yes
	}
}
