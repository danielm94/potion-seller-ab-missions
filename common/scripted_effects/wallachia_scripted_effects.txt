depose_the_pretender_effect = {
	set_variable = {
		which = matches_found_for_hre_emperor
		value = 0
	}
	every_country = {
		limit = {
			OR = {
				NOT = {
					has_country_flag = ignore_for_select_new_emperor_effect
				}
				had_country_flag = {
					flag = ignore_for_select_new_emperor_effect
					days = 9125
				}
			}
			has_matching_religion = event_target:Emperor
			is_emperor = no
			is_subject = no
			is_part_of_hre = yes
			government = monarchy
		}
		PREV = {
			change_variable = {
				which = matches_found_for_hre_emperor
				value = 1
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = strongest_eligible_hre_emperor
				}
			}
			save_global_event_target_as = strongest_eligible_hre_emperor
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:strongest_eligible_hre_emperor
						value = 1
					}
				}
				save_global_event_target_as = strongest_eligible_hre_emperor
			}
		}
	}
	if = {
		limit = {
			is_variable_equal = {
				which = matches_found_for_hre_emperor
				value = 0
			}
		}
		event_target:Emperor = {
			dismantle_hre = yes
		}
	}
	else = {
		event_target:strongest_eligible_hre_emperor = {
			set_emperor = yes
		}
		clear_global_event_target = strongest_eligible_hre_emperor
	}
}

find_strongest_country_that_voted_to_leave_hre = {
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_emperor = no
			is_subject = no
			has_voted_to_leave_hre = yes
			NOT = {
				alliance_with = emperor
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = $event_target_name_to_save_as$
				}
			}
			save_global_event_target_as = $event_target_name_to_save_as$
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:$event_target_name_to_save_as$
						value = 1
					}
				}
				save_global_event_target_as = $event_target_name_to_save_as$
			}
		}
	}
}

imperial_retribution_find_strongest_hre_prince = {
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_emperor = no
			is_subject = no
			NOT = {
				truce_with = event_target:impaler_country
			}
			NOT = {
				war_with = event_target:impaler_country
			}
			NOT = {
				alliance_with = event_target:impaler_country
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = retribution_leader
				}
			}
			save_global_event_target_as = retribution_leader
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:retribution_leader
						value = 1
					}
				}
				save_global_event_target_as = retribution_leader
			}
		}
	}
}

#SCOPE - Province
wallachia_remove_road_bonus = {
	if = {
		limit = {
			has_province_modifier = wallachia_road_1_bonus
		}
		remove_province_modifier = wallachia_road_1_bonus
	}
	if = {
		limit = {
			has_province_modifier = wallachia_road_2_bonus
		}
		remove_province_modifier = wallachia_road_2_bonus
	}
	if = {
		limit = {
			has_province_modifier = wallachia_road_3_bonus
		}
		remove_province_modifier = wallachia_road_3_bonus
	}
	if = {
		limit = {
			has_province_modifier = wallachia_road_4_bonus
		}
		remove_province_modifier = wallachia_road_4_bonus
	}
	if = {
		limit = {
			has_province_modifier = wallachia_road_5_bonus
		}
		remove_province_modifier = wallachia_road_5_bonus
	}
}

test = {
	for = {
		amount = 20
		effect = "random_owned_province = {
		limit = {
			has_production_building_trigger = no
		}
		add_base_tax = 12
		add_base_manpower = 12
		add_base_production = 12
		add_building = workshop
	}"
	}
}