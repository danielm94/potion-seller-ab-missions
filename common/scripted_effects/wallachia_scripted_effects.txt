depose_the_pretender_effect = {
	set_variable = {
		which = matches_found_for_hre_emperor
		value = 0
	}
	every_country = {
		limit = {
			OR = {
				NOT = {
					has_country_flag = ignore_for_select_new_emperor_effect
				}
				had_country_flag = {
					flag = ignore_for_select_new_emperor_effect
					days = 9125
				}
			}
			has_matching_religion = event_target:Emperor
			is_emperor = no
			is_subject = no
			is_part_of_hre = yes
			government = monarchy
		}
		PREV = {
			change_variable = {
				which = matches_found_for_hre_emperor
				value = 1
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = strongest_eligible_hre_emperor
				}
			}
			save_global_event_target_as = strongest_eligible_hre_emperor
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:strongest_eligible_hre_emperor
						value = 1
					}
				}
				save_global_event_target_as = strongest_eligible_hre_emperor
			}
		}
	}
	if = {
		limit = {
			is_variable_equal = {
				which = matches_found_for_hre_emperor
				value = 0
			}
		}
		event_target:Emperor = {
			dismantle_hre = yes
		}
	}
	else = {
		event_target:strongest_eligible_hre_emperor = {
			set_emperor = yes
		}
		clear_global_event_target = strongest_eligible_hre_emperor
	}
}

find_strongest_country_that_voted_to_leave_hre = {
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_emperor = no
			is_subject = no
			has_voted_to_leave_hre = yes
			NOT = {
				alliance_with = emperor
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = $event_target_name_to_save_as$
				}
			}
			save_global_event_target_as = $event_target_name_to_save_as$
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:$event_target_name_to_save_as$
						value = 1
					}
				}
				save_global_event_target_as = $event_target_name_to_save_as$
			}
		}
	}
}

imperial_retribution_find_strongest_hre_prince = {
	every_country = {
		limit = {
			is_part_of_hre = yes
			is_emperor = no
			is_subject = no
			NOT = {
				truce_with = event_target:impaler_country
			}
			NOT = {
				war_with = event_target:impaler_country
			}
			NOT = {
				alliance_with = event_target:impaler_country
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_global_event_target = retribution_leader
				}
			}
			save_global_event_target_as = retribution_leader
		}
		else = {
			if = {
				limit = {
					military_strength = {
						who = event_target:retribution_leader
						value = 1
					}
				}
				save_global_event_target_as = retribution_leader
			}
		}
	}
}

romanianization_of_adriatic_italy_mark_provinces = {
	every_province = {
		limit = {
			OR = {
				area = venetia_area
				area = east_adriatic_coast_area
				area = carinthia_area
				area = croatia_area
				area = rascia_area
				area = albania_area
				area = central_italy_area
				area = apulia_area
				province_id = 110
				province_id = 113
				province_id = 114
			}
			culture_group = latin
		}
		set_province_flag = WAL_adriaticii_province
	}
}