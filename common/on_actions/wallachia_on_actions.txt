on_new_monarch = {
	if = {
		limit = {
			has_reform = appointive_voivodate
		}
		random_list = {
			10 = {
				set_dynasty = "Racovita"
				add_ruler_personality = zealot_personality
			}
			10 = {
				set_dynasty = "Movilesti"
				add_ruler_personality = silver_tongue_personality
			}
			10 = {
				set_dynasty = "Mavrocordatos"
				add_ruler_personality = midas_touched_personality
			}
			10 = {
				set_dynasty = "Ghica"
				add_ruler_personality = silver_tongue_personality
			}
			10 = {
				set_dynasty = "Cantacuzino"
				add_ruler_personality = scholar_personality
			}
			10 = {
				set_dynasty = "Bibescu"
				add_ruler_personality = charismatic_negotiator_personality
			}
			10 = {
				set_dynasty = "Draculesti"
				add_ruler_personality = bold_fighter_personality
			}
			10 = {
				set_dynasty = "Danesti"
				add_ruler_personality = strict_personality
			}
			10 = {
				set_dynasty = "Basarab"
				add_ruler_personality = righteous_personality
			}
			10 = {
				set_dynasty = "Brancoveanu"
				add_ruler_personality = architectural_visionary_personality
			}
		}
	}
}

on_siege_won_country = {
	if = {
		limit = {
			FROM = {
				owner = {
					is_in_war_of_the_ten_houses_disaster = yes
				}
				is_capital = yes
			}
			tag = REB
		}
		FROM = {
			owner = {
				set_country_flag = wallachian_civil_war_voivode_was_captured
			}
		}
	}
}

on_culture_promoted = {
	if = {
		limit = {
			has_country_flag = wal_bulgarian_underclass
			accepted_culture = bulgarian
		}
		remove_accepted_culture = bulgarian
		hidden_effect = {
			export_to_variable = {
				which = promote_culture_cost_var
				value = modifier:promote_culture_cost
			}
			export_to_variable = {
				which = all_power_cost_var
				value = modifier:all_power_cost
			}
			set_variable = {
				which = total_reduction
				which = promote_culture_cost_var
			}
			change_variable = {
				which = total_reduction
				which = all_power_cost_var
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = total_reduction
							value = -0.9
						}
					}
				}
				set_variable = {
					which = total_reduction
					value = -0.9
				}
			}
			multiply_variable = {
				which = total_reduction
				value = 100
			}
			set_variable = {
				which = diplo_refund
				which = total_reduction
			}
			change_variable = {
				which = diplo_refund
				value = 100
			}
			round_variable = {
				which = diplo_refund
				value = -1
			}
			variable_effect = {
				var = diplo_refund
				effect = add_dip_power
			}
		}
	}
}

on_province_owner_change = {
	if = {
		limit = {
			owner = {
				are_bulgars_an_underclass = yes
			}
			culture = bulgarian
		}
		add_unrest = 10
		add_nationalism = 30
		add_province_modifier = {
			name = wallachia_bulgar_underclass
			duration = -1
		}
	}
}

#Bonus for liberating orthodox
on_conquest = {
	if = {
		limit = {
			owner = {
				is_or_was_wallachia = yes
				has_country_flag = dof_liberation_mechanic
				is_defender_of_faith = yes
			}
			religion = orthodox
			FROM = {
				NOT = {
					religion = orthodox
				}
			}
		}
		if = {
			limit = {
				FROM = {
					religion_group = christian
				}
			}
			add_province_modifier = {
				name = wallachia_liberated_orthodox_bretheren_from_heretics
				duration = 7300
			}
		}
		else_if = {
			limit = {
				FROM = {
					OR = {
						religion_group = reformed_pagan
						religion_group = pagan
					}
				}
			}
			add_province_modifier = {
				name = wallachia_liberated_orthodox_bretheren_from_devil_worshipers
				duration = 7300
			}
		}
		else = {
			add_province_modifier = {
				name = wallachia_liberated_orthodox_bretheren_from_heathens
				duration = 7300
			}
		}
	}
}