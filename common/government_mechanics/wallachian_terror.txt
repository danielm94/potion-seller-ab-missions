wallachian_terror_mechanic = {
	alert_icon_gfx = GFX_wallachian_terror_alert_icon
	alert_icon_index = 1
	available = {
		has_dlc = "Domination"
		tag = WAL
	}
	powers = {
		terror_power = {
			gui = wallachian_terror_gov_mech
			show_before_interactions = yes
			max = 100
			base_monthly_growth = 0
			scaled_modifier = {
				modifier = {
					improve_relation_modifier = -0.1
					ae_impact = 0.05
					diplomatic_reputation = -1
					monthly_terror_power = -0.1
					all_estate_influence_modifier = -0.15
					morale_damage = 0.1
					shock_damage = 0.1
					global_unrest = -4
				}
			}
		}
	}
	interactions = {
		impale_the_privileged = {
			gui = wallachian_terror_gov_interaction
			icon = "GFX_wallachian_terror_impale_the_privileged_button"
			cost_type = terror_power
			trigger = {
				has_government_power = {
					mechanic_type = wallachian_terror_mechanic
					power_type = terror_power
					value = 30
				}
			}
			effect = {
				custom_tooltip = wallachian_terror_purged_estates_rebellion_tooltip
				hidden_effect = {
					wallachian_terror_spawn_rebels_from_purge = yes
				}
				custom_tooltip = wallachian_terror_purged_estates_loyalty_loss_tooltip
				hidden_effect = {
					add_estate_loyalty = {
						estate = all
						loyalty = -40
					}
				}
				add_legitimacy = -30
				custom_tooltip = wallachian_terror_purged_estates_effect_tooltip
				hidden_effect = {
					set_country_flag = wallachian_terror_purged_estates
					set_ruler_flag = wallachian_terror_ruler_purged_estates
					change_variable = {
						which = estate_purges_amount
						value = 1
					}
				}
				change_estate_land_share = {
					estate = all
					share = -10
				}
				add_country_modifier = {
					name = wallachian_terror_purging_the_estate_elites
					duration = 7300
				}
				custom_tooltip = wallachian_terror_purged_estates_no_rebels_from_seizing_tooltip
				custom_tooltip = wallachian_terror_purged_estates_can_seize_during_war_tooltip
				sell_crownland_modified_by_purges = yes
				custom_tooltip = wallachian_terror_purges_devastation_tooltip
				hidden_effect = {
					every_owned_province = {
						add_devastation = 5
					}
				}
				change_terror = {
					value = -40
					scaled_with_gain_modifier = no
				}
				if = {
					limit = {
						has_estate_privilege = estate_nobles_dominance_of_the_boierime
					}
					custom_tooltip = wallachian_terror_purging_the_elites_civil_war_tooltip
					country_event = {
						id = wallachian_civil_war_events.1
						days = 1
					}
				}
			}
			cooldown_years = 20
		}
		brutalize_the_enemy = {
			gui = wallachian_terror_gov_interaction
			icon = GFX_wallachian_terror_brutalize_the_enemy_button
			cost_type = terror_power
			trigger = {
				has_government_power = {
					mechanic_type = wallachian_terror_mechanic
					power_type = terror_power
					value = 20
				}
			}
			effect = {
				add_country_modifier = {
					name = wallachian_terror_brutalize_the_enemy
					duration = 3650
				}
				custom_tooltip = brutalize_the_enemy_razing_tooltip
				tooltip = {
					add_nationalism = 15
					add_province_modifier = {
						name = wallachian_terror_raze_mod
						duration = 5475
					}
				}
				hidden_effect = {
					enable_razing = yes
					country_event = {
						id = AB_wallachia_events.2
						days = 3650
					}
				}
				custom_tooltip = brutalize_the_enemy_dead_enemies_gives_terror_tooltip
				tooltip = {
					add_province_modifier = {
						name = wallachian_terror_garden_of_the_defeated
						duration = 180
					}
				}
				custom_tooltip = brutalize_the_enemy_friendly_territory_win_battle_tooltip
				tooltip = {
					add_province_modifier = {
						name = wallachian_terror_warning_for_the_rest
						duration = 180
					}
				}
				hidden_effect = {
					enable_terror_gain_from_battles = yes
					country_event = {
						id = AB_wallachia_events.3
						days = 3650
					}
				}
				change_terror = {
					value = -30
					scaled_with_gain_modifier = no
				}
			}
			cooldown_years = 10
		}
		awaken_the_butcher = {
			gui = wallachian_terror_gov_interaction
			icon = GFX_wallachian_terror_awaken_the_butcher_button
			trigger = {
				has_government_power = {
					mechanic_type = wallachian_terror_mechanic
					power_type = terror_power
					value = 30
				}
			}
			effect = {
				if = {
					limit = {
						ruler_has_personality = impaler_personality
					}
					custom_tooltip = awaken_the_butcher_bank_personality_tooltip
					hidden_effect = {
						change_variable = {
							which = impaler_ruler_count
							value = 1
						}
					}
				}
				else = {
					change_dip = -2
					change_mil = 1
					custom_tooltip = awaken_the_butcher_impaler_personality_tooltip
					change_terror = {
						value = -30
						scaled_with_gain_modifier = no
					}
					hidden_effect = {
						#For some reason, you can't add ruler personalities through government mechanic interactions, so we have to use an event instead.
						country_event = {
							id = AB_wallachia_events.1
						}
					}
				}
			}
			cooldown_years = 0
		}
	}
}
